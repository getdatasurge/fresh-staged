---
phase: 5
plan: 1
wave: 1
---

# Plan 5.1: Final Verification and Cleanup

## Objective

Complete final verification of all refactored views and cleanup any remaining unused legacy Supabase code.

## Context

- `.gsd/STATE.md` - Current position: All tRPC migrations complete
- `.gsd/SPEC.md` - tRPC refactor specification
- `.gsd/ROADMAP.md` - Migration roadmap
- `src/` - Frontend React app
- `backend/src/` - Node.js backend

## Tasks

<task type="manual">
  <name>Verify all refactored views</name>
  <files>src/pages/*.tsx</files>
  <action>
    Manually verify all refactored views to ensure they:
    1. Load correctly
    2. Display data from tRPC queries
    3. Handle mutations correctly
    4. Have no broken links or functionality
  </action>
  <verify>
    Check each page:
    - Dashboard.tsx - Verify stats and units display
    - Alerts.tsx - Verify alert list and workflow
    - EventHistory.tsx - Verify audit log
    - Platform pages - Verify platform views
  </verify>
  <done>All views verified and working correctly.</done>
</task>

<task type="auto">
  <name>Identify unused legacy Supabase code</name>
  <files>src/integrations/supabase/*.ts, src/lib/api/*.ts</files>
  <action>
    Analyze the codebase to identify unused legacy Supabase code:
    1. Check which API functions are still using Supabase directly
    2. Identify unused Supabase client imports
    3. Look for deprecated API modules
  </action>
  <verify>Run a dependency analysis to find unused files.</verify>
  <done>Unused legacy code identified and documented.</done>
</task>

<task type="auto">
  <name>Cleanup unused legacy Supabase code</name>
  <files>src/integrations/supabase/*.ts, src/lib/api/*.ts</files>
  <action>
    Safely remove unused legacy Supabase code:
    1. Remove unused API functions that haven't been refactored
    2. Cleanup unused Supabase client imports
    3. Delete deprecated API modules if no longer needed
  </action>
  <verify>Run build and tests to ensure no functionality is broken.</verify>
  <done>Unused legacy code removed and project builds successfully.</done>
</task>

## Success Criteria

- [ ] All refactored views are verified as working correctly
- [ ] Unused legacy Supabase code is identified and removed
- [ ] Project builds without errors
- [ ] All tests pass

## Notes

- Be cautious when removing code - ensure it's not used anywhere in the codebase
- Keep track of any remaining Supabase calls that are still in use (primarily in specialized functionality)
