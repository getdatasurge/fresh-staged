---
phase: 4
plan: 4
wave: 2
---

# Plan 4.4: Refactor Platform Organization Detail

## Objective
Refactor the Platform Organization Detail view to use tRPC.

## Context
- `src/pages/platform/PlatformOrganizationDetail.tsx`
- `backend/src/routers/admin.router.ts`

## Tasks

<task type="auto">
  <name>Refactor PlatformOrganizationDetail to tRPC</name>
  <files>src/pages/platform/PlatformOrganizationDetail.tsx</files>
  <action>
    - Import `useTRPC`.
    - Replace `loadOrganizationDetails` with `trpc.admin.getOrganization.useQuery`.
    - Update state management and UI to use the unified organization object (which now includes members and sites).
    - Map snake_case to camelCase properties.
    - Fix any Badge children lint issues by using spans.
  </action>
  <verify>Check frontend build and verify organization details, users, and sites are displayed correctly.</verify>
  <done>PlatformOrganizationDetail view successfully migrated to tRPC.</done>
</task>

## Success Criteria
- [ ] `PlatformOrganizationDetail.tsx` uses `trpc.admin.getOrganization`.
- [ ] All organization data (info, members, sites) is loaded via a single tRPC call.
- [ ] No more direct Supabase calls for data fetching.
