---
phase: 4
plan: 2
wave: 2
---

# Plan 4.2: Refactor Platform Organizations View

## Objective
Refactor the Platform Organizations list view to use tRPC instead of direct Supabase SDK calls.

## Context
- `src/pages/platform/PlatformOrganizations.tsx`
- `backend/src/routers/admin.router.ts`

## Tasks

<task type="auto">
  <name>Refactor PlatformOrganizations to tRPC</name>
  <files>src/pages/platform/PlatformOrganizations.tsx</files>
  <action>
    - Import `useTRPC` from `@/lib/trpc`.
    - Replace `loadOrganizations` with `trpc.admin.listOrganizations.useQuery`.
    - Update state management to use query data.
    - Update JSX to use camelCase properties from tRPC response.
    - Keep search filtering logic (it can be frontend-side for now or updated to use backend search if implemented).
  </action>
  <verify>Check frontend build and verify page renders with data from tRPC.</verify>
  <done>PlatformOrganizations view successfully migrated to tRPC.</done>
</task>

## Success Criteria
- [ ] `PlatformOrganizations.tsx` uses `useTRPC` for data fetching.
- [ ] No more direct Supabase calls in `PlatformOrganizations.tsx` (except for logs if needed).
- [ ] Organization list and stats are correctly displayed.
