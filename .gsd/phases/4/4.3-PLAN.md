---
phase: 4
plan: 3
wave: 2
---

# Plan 4.3: Refactor Platform Users View

## Objective
Refactor the Platform Users list view to use tRPC instead of direct Supabase SDK calls.

## Context
- `src/pages/platform/PlatformUsers.tsx`
- `backend/src/routers/admin.router.ts`

## Tasks

<task type="auto">
  <name>Refactor PlatformUsers to tRPC</name>
  <files>src/pages/platform/PlatformUsers.tsx</files>
  <action>
    - Import `useTRPC` from `@/lib/trpc`.
    - Replace `loadUsers` with `trpc.admin.listUsers.useQuery`.
    - Update state management to use query data.
    - Update JSX to use camelCase properties from tRPC response.
    - Preserve impersonation functionality.
  </action>
  <verify>Check frontend build and verify page renders with data from tRPC.</verify>
  <done>PlatformUsers view successfully migrated to tRPC.</done>
</task>

## Success Criteria
- [ ] `PlatformUsers.tsx` uses `useTRPC` for data fetching.
- [ ] No more direct Supabase calls in `PlatformUsers.tsx` (except for logs).
- [ ] User list and stats are correctly displayed.
