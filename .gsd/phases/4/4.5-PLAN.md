---
phase: 4
plan: 5
wave: 2
---

# Plan 4.5: Refactor Platform User Detail

## Objective
Refactor the Platform User Detail view to use tRPC.

## Context
- `src/pages/platform/PlatformUserDetail.tsx`
- `backend/src/routers/admin.router.ts`

## Tasks

<task type="auto">
  <name>Refactor PlatformUserDetail to tRPC</name>
  <files>src/pages/platform/PlatformUserDetail.tsx</files>
  <action>
    - Import `useTRPC`.
    - Replace `loadUserDetails` with `trpc.admin.getUser.useQuery`.
    - Update UI to use camelCase properties from the user object.
    - Keep recent activity logic if it still works (uses Supabase logs).
    - Fix any Badge children lint issues by using spans.
  </action>
  <verify>Check frontend build and verify user details and organization context are displayed correctly.</verify>
  <done>PlatformUserDetail view successfully migrated to tRPC.</done>
</task>

## Success Criteria
- [ ] `PlatformUserDetail.tsx` uses `trpc.admin.getUser`.
- [ ] User profile and roles are correctly displayed.
- [ ] Impersonation works correctly with the new data structure.
