---
phase: 26
plan: 01
wave: 1
gap_closure: false
---

# Plan 26-01: Verification Logic

## Goal
Create automated verification tooling to validate deployment health, SSL status, and system accessibility.

## Requirements
- VERIFY-01: Validate all health endpoints return 200 OK (3 consecutive passes)
- VERIFY-02: Validate SSL certificate is valid and trusted (openssl check)
- POST-04: Display complete URL summary (dashboard, API, Grafana, Prometheus)

## Tasks

<task>
<name>Create Verification Library</name>
<description>
Create `scripts/lib/verify-lib.sh` with functions:
- `verify_endpoint_health(url, retries)`: Checks HTTP 200
- `verify_ssl_cert(domain)`: Checks SSL validity and expiry > 30 days
- `verify_service_status(service)`: Checks Docker service state
</description>
<file>scripts/lib/verify-lib.sh</file>
<verify>
source scripts/lib/verify-lib.sh
type verify_endpoint_health
type verify_ssl_cert
</verify>
</task>

<task>
<name>Create Verification Script</name>
<description>
Create `scripts/verify-deployment.sh` that uses the library to:
1. Load configuration from `.deploy-state/config.env`
2. Check all services (backend, frontend, grafana, prometheus)
3. Check SSL for the configured domain
4. Print summary of all URLs
</description>
<file>scripts/verify-deployment.sh</file>
<instruction>
- Must use existing environment variables
- Must be idempotent
- Must output colorful, clear summary
</instruction>
<verify>
test -x scripts/verify-deployment.sh
shellcheck scripts/verify-deployment.sh || true
</verify>
</task>
