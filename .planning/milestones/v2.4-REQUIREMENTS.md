# Archived Requirements: FreshTrack Pro v2.4

**Milestone:** v2.4 Tech Debt Cleanup
**Shipped:** 2026-01-29
**Requirements:** 37/37 satisfied (100%)

## Test Infrastructure

- [x] **TEST-01**: All 38 frontend tests pass with proper tRPC mocking
- [x] **TEST-02**: All 22 backend queue.service tests pass with proper Redis/BullMQ mocking
- [x] **TEST-03**: Test infrastructure supports tRPC queryOptions pattern mocking

## Dashboard Widget Migration

- [x] **WIDGET-01**: UnitComparisonWidget uses tRPC instead of supabase
- [x] **WIDGET-02**: AnnotationsWidget uses tRPC instead of supabase
- [x] **WIDGET-03**: SiteActivityGraphWidget uses tRPC instead of supabase
- [x] **WIDGET-04**: SensorSignalTrendWidget uses tRPC instead of supabase
- [x] **WIDGET-05**: UnitComplianceScoreWidget uses tRPC instead of supabase
- [x] **WIDGET-06**: UnitsStatusGridWidget uses tRPC instead of supabase
- [x] **WIDGET-07**: EventTimelineWidget uses tRPC instead of supabase
- [x] **WIDGET-08**: DowntimeTrackerWidget uses tRPC instead of supabase
- [x] **WIDGET-09**: ManualLogStatusWidget uses tRPC instead of supabase

## Settings Components Migration

- [x] **SETTINGS-01**: EmulatorSyncHistory uses tRPC instead of supabase
- [x] **SETTINGS-02**: NotificationSettingsCard uses tRPC instead of supabase
- [x] **SETTINGS-03**: WebhookStatusCard uses tRPC instead of supabase
- [x] **SETTINGS-04**: AlertRulesScopedEditor uses tRPC instead of supabase
- [x] **SETTINGS-05**: EmulatorResyncCard uses tRPC instead of supabase
- [x] **SETTINGS-06**: SmsAlertHistory uses tRPC instead of supabase
- [x] **SETTINGS-07**: TTNProvisioningLogs uses tRPC instead of supabase

## Pages Migration

- [x] **PAGE-01**: Inspector page uses tRPC instead of supabase
- [x] **PAGE-02**: OrganizationDashboard uses tRPC instead of supabase
- [x] **PAGE-03**: ManualLog page uses tRPC instead of supabase
- [x] **PAGE-04**: Reports page uses tRPC instead of supabase
- [x] **PAGE-05**: Onboarding page uses tRPC instead of supabase
- [x] **PAGE-06**: TTNCleanup page uses tRPC instead of supabase
- [x] **PAGE-07**: HealthDashboard uses tRPC instead of supabase

## Admin/Debug Components Migration

- [x] **ADMIN-01**: SensorSimulatorPanel uses tRPC instead of supabase
- [x] **ADMIN-02**: RBACDebugPanel uses tRPC instead of supabase
- [x] **ADMIN-03**: UnitDebugBanner uses tRPC instead of supabase
- [x] **ADMIN-04**: GlobalUserSearch uses tRPC instead of supabase

## Other Components Migration

- [x] **COMP-01**: LogTempModal uses tRPC instead of supabase
- [x] **COMP-02**: NotificationDropdown uses tRPC instead of supabase
- [x] **COMP-03**: UnitSettingsSection uses tRPC instead of supabase
- [x] **COMP-04**: InvoiceHistory uses tRPC instead of supabase

## Cleanup

- [x] **CLEAN-01**: supabase-placeholder.ts deleted (all imports removed)
- [x] **CLEAN-02**: Error handling utilities updated for tRPC error patterns
- [x] **CLEAN-03**: All tests pass (frontend: 141, backend: 1050+)

## Tech Debt Carried Forward

1. Settings history feature removed (no backend procedure exists)
2. InvoiceHistory simplified to billing portal link (no listInvoices procedure)
3. Sensor simulator edge function unavailable (removed during migration)
4. TTNCredentialsPanel has reduced test coverage (5 vs 21 tests)
5. 15 pre-existing failures in tests/api/ttn-devices.test.ts (unrelated to migration)

---

_Archived: 2026-01-29_
