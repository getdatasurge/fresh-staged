---
phase: 29-production-data-migration
plan: 04
type: execute
wave: 4
depends_on: ['29-03']
files_modified: []
autonomous: false

must_haves:
  truths:
    - 'New system serves production traffic'
    - 'Password reset communication sent'
    - 'Post-cutover monitoring confirms stability'
    - 'Supabase retained as rollback option for 48 hours'
  artifacts: []
  key_links: []
---

<objective>
Cut over production traffic to the new system and stabilize post-migration.

Purpose: Switch users to the migrated system with clear communication and monitoring.
Output: Production running on the new stack with rollback window active.
</objective>

<context>
@docs/CUTOVER_CHECKLIST.md
@docs/PRODUCTION_DEPLOYMENT.md
@.planning/phases/29-production-data-migration/29-RESEARCH.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Checkpoint 1: Deploy and cut over traffic</name>
  <what-built>Production stack deployed and DNS routed to new system.</what-built>
  <how-to-verify>
```bash
./scripts/health-check.sh
./scripts/deploy.sh
```
- Update DNS to point to new server
- Validate https://freshtrackpro.com loads
- Verify login flow prompts password reset
  </how-to-verify>
  <resume-signal>Type "cutover-complete" when traffic is routed to new system</resume-signal>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Checkpoint 2: Post-cutover stabilization</name>
  <what-built>System stable under production load with rollback window open.</what-built>
  <how-to-verify>
- [ ] Send password reset email instructions to all users
- [ ] Monitor Grafana/Uptime Kuma for 24 hours
- [ ] Confirm sensor data ingestion and alerting
- [ ] Keep Supabase read-only for 48 hours as rollback option
  </how-to-verify>
  <resume-signal>Type "stabilized" when post-cutover checks pass</resume-signal>
</task>

</tasks>
