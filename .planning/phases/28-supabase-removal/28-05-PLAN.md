---
phase: 28
plan: 05
wave: 5
gap_closure: false
---

# Plan 28-05: Core Entity Dashboards Migration

## Goal
Migrate main listing pages: `Dashboard.tsx`, `Units.tsx`, `Sites.tsx`, and `Alerts.tsx` to tRPC.

## Requirements
- Use `trpc.units.list`, `trpc.sites.list`, `trpc.alerts.list`.
- Ensure all computed fields (unit status) match backend logic.
- Remove Supabase direct queries from these files.

## Tasks

<task>
<name>Migrate Dashboard</name>
<description>
Update `src/pages/Dashboard.tsx` to use tRPC for fetching units, sites, and manual logs.
</description>
<file>src/pages/Dashboard.tsx</file>
<verify>
! grep "supabase.from" src/pages/Dashboard.tsx
</verify>
</task>

<task>
<name>Migrate Units Page</name>
<description>
Update `src/pages/Units.tsx` to use `trpc.units.list`.
</description>
<file>src/pages/Units.tsx</file>
</task>

<task>
<name>Migrate Sites Page</name>
<description>
Update `src/pages/Sites.tsx` to use `trpc.sites.list`.
</description>
<file>src/pages/Sites.tsx</file>
</task>

<task>
<name>Migrate Alerts Page</name>
<description>
Update `src/pages/Alerts.tsx` to use `trpc.alerts.list`.
</description>
<file>src/pages/Alerts.tsx</file>
</task>
