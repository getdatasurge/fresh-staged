---
phase: 28
plan: 04
wave: 4
gap_closure: false
---

# Plan 28-04: System Pages Migration

## Goal
Migrate remaining pages `PilotSetup.tsx`, `PlatformDeveloperTools`, and `useOfflineSync`.

## Requirements
- Identify functionality in each.
- Migrate to appropriate routers (`organizations`, `utils`?).

## Tasks

<task>
<name>Update Pilot Setup</name>
<description>
Migrate `src/pages/PilotSetup.tsx`. Assuming it sets up org/site. Use `trpc.organizations` or `trpc.sites`.
</description>
<file>src/pages/PilotSetup.tsx</file>
<verify>
! grep "supabase.from" src/pages/PilotSetup.tsx
</verify>
</task>

<task>
<name>Update Platform Tools</name>
<description>
Migrate `src/pages/platform/PlatformDeveloperTools.tsx`. This might use "admin" queries.
If dangerous, move logic to `admin-tools.router.ts` protected by `adminProcedure`.
</description>
<file>src/pages/platform/PlatformDeveloperTools.tsx</file>
<verify>
! grep "supabase.from" src/pages/platform/PlatformDeveloperTools.tsx
</verify>
</task>

<task>
<name>Update Offline Sync</name>
<description>
Migrate `src/hooks/useOfflineSync.ts`. If it syncs logs/readings, use `trpc.readings.sync`.
</description>
<file>src/hooks/useOfflineSync.ts</file>
<verify>
! grep "supabase.from" src/hooks/useOfflineSync.ts
</verify>
</task>
