---
phase: 13-e2e-validation-cutover
plan: 04
type: execute
wave: 1
depends_on: []
files_modified:
  - docs/DEPLOYMENT_DECISION_GUIDE.md
autonomous: true

must_haves:
  truths:
    - "Guide helps non-technical users choose the right deployment target"
    - "Scenarios cover small business, mid-size, and enterprise use cases"
    - "Monthly cost estimates are provided for each scenario"
    - "Clear recommendation is given for each scenario (not just feature comparison)"
    - "Guide links to detailed documentation for chosen deployment target"
  artifacts:
    - path: "docs/DEPLOYMENT_DECISION_GUIDE.md"
      provides: "Scenario-based deployment decision guide"
      min_lines: 200
  key_links:
    - from: "DEPLOYMENT_DECISION_GUIDE.md"
      to: "docs/SELFHOSTED_DEPLOYMENT.md"
      via: "Link to self-hosted guide"
      pattern: "SELFHOSTED_DEPLOYMENT"
    - from: "DEPLOYMENT_DECISION_GUIDE.md"
      to: "docs/DIGITALOCEAN_DEPLOYMENT.md"
      via: "Link to DigitalOcean guide"
      pattern: "DIGITALOCEAN_DEPLOYMENT"
---

<objective>
Create a scenario-based deployment decision guide that helps users choose between self-hosted and DigitalOcean deployment options.

Purpose: Address success criterion #5 - deployment decision guide exists for choosing deployment target based on requirements.
Output: Standalone document at docs/DEPLOYMENT_DECISION_GUIDE.md with prescriptive recommendations per scenario.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/13-e2e-validation-cutover/13-CONTEXT.md
@.planning/phases/13-e2e-validation-cutover/13-RESEARCH.md
@docs/SELFHOSTED_DEPLOYMENT.md
@docs/DIGITALOCEAN_DEPLOYMENT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create deployment decision guide</name>
  <files>docs/DEPLOYMENT_DECISION_GUIDE.md</files>
  <action>
Create docs/DEPLOYMENT_DECISION_GUIDE.md with scenario-based recommendations:

1. **Introduction:**
   - Purpose: Help you choose the right deployment approach
   - Two main targets: Self-hosted (any VM/server) and DigitalOcean (optimized for DO)
   - Note: Both use the same application stack, differ in infrastructure management

2. **Quick Decision Matrix (TL;DR table):**

| Your Situation | Recommended Deployment | Monthly Cost | Setup Time |
|----------------|----------------------|--------------|------------|
| First-time setup, want simplest path | DigitalOcean Droplet + Managed DB | $37-54 | 30 min |
| Have existing server/VM | Self-hosted | $0 (infra only) | 1-2 hours |
| Need data sovereignty/compliance | Self-hosted | $0 (infra only) | 1-2 hours |
| Budget-conscious, comfortable with Linux | Self-hosted or DO Droplet | $25+ | 1 hour |
| Enterprise, IT team available | Self-hosted | Existing infra | 2-4 hours |

3. **Detailed Scenarios (4-5 scenarios):**

**Scenario 1: Small Restaurant/Cafe (1-10 sensors)**
- Profile: Single location, limited IT skills, want it to "just work"
- Scale: 10-20 sensors, <1000 readings/day
- Budget: $30-50/month
- Recommendation: DigitalOcean Droplet ($25) + Managed PostgreSQL ($12)
- Why: Managed DB eliminates backup complexity, easy scaling
- Cost breakdown: $37/month total
- Get started: [Link to DIGITALOCEAN_DEPLOYMENT.md]

**Scenario 2: Multi-Location Food Service (10-50 sensors)**
- Profile: 2-5 locations, some technical staff, moderate volume
- Scale: 50-100 sensors, 5000-10000 readings/day
- Budget: $50-100/month
- Recommendation: DigitalOcean with Managed DB + Spaces for backups
- Why: Scales easily, managed services reduce ops burden
- Cost breakdown: $54-80/month
- Get started: [Link to DIGITALOCEAN_DEPLOYMENT.md]

**Scenario 3: Healthcare/Compliance-Heavy (any size)**
- Profile: Strict data residency requirements, audit trails
- Scale: Varies
- Budget: N/A (compliance > cost)
- Recommendation: Self-hosted on controlled infrastructure
- Why: Full control over data location, easier audit compliance
- Considerations: May require dedicated IT support
- Get started: [Link to SELFHOSTED_DEPLOYMENT.md]

**Scenario 4: Existing Infrastructure (IT team available)**
- Profile: Enterprise with existing servers/VMs, IT department
- Scale: 100+ sensors, high volume
- Budget: No new cloud costs preferred
- Recommendation: Self-hosted on existing infrastructure
- Why: Leverage existing investment, no recurring cloud fees
- Requirements: VM with 2+ CPU cores, 4GB+ RAM, 50GB+ storage
- Get started: [Link to SELFHOSTED_DEPLOYMENT.md]

**Scenario 5: Development/Testing**
- Profile: Developers evaluating the system
- Scale: N/A
- Budget: Minimal/free
- Recommendation: Local Docker Compose
- Why: Zero cost, full functionality, easy reset
- Get started: docker compose up (from project root)

4. **Cost Comparison Table:**

| Component | Self-Hosted | DO Droplet | DO + Managed DB |
|-----------|-------------|------------|-----------------|
| Compute | Your server | $25/mo (2GB) | $25/mo |
| Database | Included | Included | $12-15/mo |
| Object Storage | Included (MinIO) | Included | $5/mo (Spaces) |
| SSL Certificates | Free (Let's Encrypt) | Free | Free |
| Backups | DIY | DIY | Included |
| **Total** | $0* | $25/mo | $37-54/mo |

*Self-hosted: Your existing infrastructure costs apply

5. **Requirements by Deployment:**

**Self-Hosted Requirements:**
- VM with 2 CPU cores, 4GB RAM, 50GB storage minimum
- Ubuntu 22.04+ or Debian 12+ (recommended)
- Domain name with DNS control
- SSH access
- Ports 80, 443 open

**DigitalOcean Requirements:**
- DigitalOcean account
- Domain name with DNS control
- doctl CLI or console access
- SSH key configured

6. **FAQ:**
- "Can I migrate between deployment types?" Yes, data is portable.
- "Which is more reliable?" Both can achieve 99.9%+ uptime with proper setup.
- "What about AWS/GCP?" Same self-hosted approach works on EC2/GCE.
- "Do I need technical skills?" DigitalOcean is easier; self-hosted needs basic Linux/Docker knowledge.

7. **Next Steps:**
- Chose Self-Hosted? → [SELFHOSTED_DEPLOYMENT.md](./SELFHOSTED_DEPLOYMENT.md)
- Chose DigitalOcean? → [DIGITALOCEAN_DEPLOYMENT.md](./DIGITALOCEAN_DEPLOYMENT.md)
- Need help deciding? → Contact support or try local development first
  </action>
  <verify>
Run: wc -l docs/DEPLOYMENT_DECISION_GUIDE.md
Should be at least 200 lines.
Run: grep -c "Scenario" docs/DEPLOYMENT_DECISION_GUIDE.md
Should return at least 5 (multiple scenario references).
  </verify>
  <done>
DEPLOYMENT_DECISION_GUIDE.md exists with scenario-based recommendations.
Guide includes cost estimates and clear "get started" links.
All scenarios have explicit recommendations (not just comparisons).
  </done>
</task>

<task type="auto">
  <name>Task 2: Cross-reference from existing deployment docs</name>
  <files>docs/SELFHOSTED_DEPLOYMENT.md, docs/DIGITALOCEAN_DEPLOYMENT.md</files>
  <action>
Add a brief section at the top of both deployment docs pointing to the decision guide:

1. **In SELFHOSTED_DEPLOYMENT.md:**
   Add after the main title/intro:
   ```markdown
   > **Not sure if self-hosted is right for you?** See the [Deployment Decision Guide](./DEPLOYMENT_DECISION_GUIDE.md) to compare options.
   ```

2. **In DIGITALOCEAN_DEPLOYMENT.md:**
   Add after the main title/intro:
   ```markdown
   > **Not sure if DigitalOcean is right for you?** See the [Deployment Decision Guide](./DEPLOYMENT_DECISION_GUIDE.md) to compare options.
   ```

Keep the additions minimal - just a single callout box near the top of each doc.
  </action>
  <verify>
Run: head -20 docs/SELFHOSTED_DEPLOYMENT.md | grep -c "Decision Guide"
Should return 1.
Run: head -20 docs/DIGITALOCEAN_DEPLOYMENT.md | grep -c "Decision Guide"
Should return 1.
  </verify>
  <done>
Both deployment docs link to the decision guide.
Cross-references are minimal and non-intrusive.
  </done>
</task>

</tasks>

<verification>
Review the deployment decision guide:
```bash
cd /home/skynet/freshtrack-pro-local/freshtrack-pro
# Check guide structure
head -100 docs/DEPLOYMENT_DECISION_GUIDE.md

# Verify links work
grep -o '\[.*\](.*\.md)' docs/DEPLOYMENT_DECISION_GUIDE.md | head -10

# Check cross-references
grep "Decision Guide" docs/SELFHOSTED_DEPLOYMENT.md docs/DIGITALOCEAN_DEPLOYMENT.md
```
</verification>

<success_criteria>
- DEPLOYMENT_DECISION_GUIDE.md exists with 5+ scenarios
- Each scenario has explicit recommendation (not just feature list)
- Monthly cost estimates included
- Links to detailed docs for each deployment target
- Existing deployment docs cross-reference the decision guide
</success_criteria>

<output>
After completion, create `.planning/phases/13-e2e-validation-cutover/13-04-SUMMARY.md`
</output>
