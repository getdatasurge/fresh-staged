# FreshTrack Pro Production Environment
# Copy to .env.production and fill in values
#
# IMPORTANT: Secrets should NOT be in this file
# Use file-based secrets in ./secrets/ directory instead

# ===========================================
# Application
# ===========================================
NODE_ENV=production
LOG_LEVEL=info
PORT=3000
HOST=0.0.0.0

# ===========================================
# Domain Configuration
# ===========================================
# Update these to match your production domain
FRONTEND_URL=http://localhost
API_URL=http://localhost/api
MONITORING_URL=http://localhost:3001
STATUS_URL=http://localhost:3002

# ===========================================
# Database (PostgreSQL)
# ===========================================
DATABASE_URL=postgresql://frostguard:${POSTGRES_PASSWORD}@postgres:5432/frostguard

# Connection pool settings (for high-traffic production)
DB_POOL_MIN=5
DB_POOL_MAX=20
DB_POOL_IDLE_TIMEOUT=30000
DB_POOL_CONNECTION_TIMEOUT=5000

# ===========================================
# Redis (Cache & Jobs)
# ===========================================
# Self-hosted Redis (Docker)
REDIS_URL=redis://redis:6379

# ===========================================
# MinIO / S3 (Object Storage)
# ===========================================
# Self-hosted MinIO (Docker)
MINIO_ENDPOINT=http://minio:9000
MINIO_BUCKET_ASSETS=assets
MINIO_USE_SSL=false

# ===========================================
# Stack Auth (Authentication Service)
# ===========================================
STACK_AUTH_PROJECT_ID=82b1319b-9ab2-4b0c-9a2e-992c8317905c
STACK_AUTH_API_URL=https://api.stack-auth.com

# Stack Auth publishable key (safe to expose in frontend)
STACK_AUTH_PUBLISHABLE_KEY=pck_0945r2v7h421g4p330a6gpxawbt9sjhjbe7dbt1t7vvvg

# ===========================================
# External Services
# ===========================================

# TTN (The Things Network) - Required for IoT device integration
TTN_API_URL=https://eu1.cloud.thethings.network
TTN_APPLICATION_ID=your-ttn-application-id
TTN_API_KEY=your-ttn-api-key
TTN_WEBHOOK_URL=http://localhost/api/webhooks/ttn

# Stripe (Payment Processing) - Required for subscriptions
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=

# Resend (Email Delivery) - Required for notifications
RESEND_API_KEY=
EMAIL_FROM_ADDRESS=noreply@freshtrackpro.com

# Telnyx (SMS Notifications) - Optional
TELNYX_API_KEY=
TELNYX_MESSAGING_PROFILE_ID=
TELNYX_PHONE_NUMBER=

# ===========================================
# Feature Flags
# ===========================================
# Enable/disable features in production
FEATURE_DEVICE_PROVISIONING=true
FEATURE_SMS_NOTIFICATIONS=true
FEATURE_EMAIL_NOTIFICATIONS=true
FEATURE_WEBHOOK_INTEGRATIONS=true

# ===========================================
# Monitoring & Observability
# ===========================================
# Application Performance Monitoring (Sentry)
SENTRY_DSN=
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# Application URL (used in email templates and digest links)
APP_URL=http://localhost

# Metrics export (Prometheus)
METRICS_ENABLED=false
METRICS_PORT=9090

POSTGRES_PASSWORD=b9c27fa5b6e5846443207c4fdf7ed54f
GF_SECURITY_ADMIN_PASSWORD=admin123

# ===========================================
# Security
# ===========================================
# CORS allowed origins (comma-separated)
CORS_ORIGINS=http://localhost

# Rate limiting (requests per minute)
RATE_LIMIT_WINDOW=60000
RATE_LIMIT_MAX=100

# Session configuration
SESSION_COOKIE_SECURE=false
SESSION_COOKIE_SAMESITE=strict

# ===========================================
# Secrets (DO NOT PUT VALUES HERE)
# ===========================================
# Use file-based secrets instead:
# - secrets/postgres_password.txt  → PostgreSQL password
# - secrets/jwt_secret.txt         → JWT signing secret (generate with: openssl rand -base64 32)
# - secrets/stack_auth_secret.txt  → Stack Auth secret key
# - secrets/minio_user.txt         → MinIO root username
# - secrets/minio_password.txt     → MinIO root password
# - secrets/grafana_password.txt   → Grafana admin password
